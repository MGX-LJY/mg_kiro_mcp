# Init Step3: 文件文档生成模板

## 🎯 任务概述
基于Step2创建的任务列表，逐个分析文件内容并生成结构化的markdown文档，保存到mg_kiro/文件夹。

## 📁 文档生成流程

### 1. 文件内容获取
- **文件路径**: {{file_path}}
- **文件类型**: {{file_extension}}
- **文件大小**: {{file_size}}
- **编码格式**: UTF-8

### 2. 自动分析维度

#### 基础信息分析
- 文件名称和位置
- 文件大小和行数统计
- 最后修改时间
- 文件类型和语言识别

#### 代码结构分析
- **函数/方法识别**: 提取所有函数定义和签名
- **类/接口分析**: 识别类定义、继承关系、接口实现
- **变量/常量**: 重要的全局变量和常量定义
- **导入/导出**: 分析依赖关系和模块暴露接口

#### 功能逻辑分析
- **主要功能**: 文件的核心职责和用途
- **业务逻辑**: 关键的业务处理流程
- **数据处理**: 数据的输入、处理、输出流程
- **错误处理**: 异常处理机制

## 📝 文档生成格式

### Markdown文档结构
```markdown
# {{file_name}} - 文件分析文档

**文件路径**: `{{relative_path}}`  
**生成时间**: {{timestamp}}  
**分析工具**: mg_kiro MCP Server

---

## 📊 文件基本信息
- **文件大小**: {{file_size}} bytes
- **文件类型**: {{file_type}}
- **编码格式**: {{encoding}}
- **代码行数**: {{line_count}}

---

## 📝 文件内容
```{{language}}
{{file_content}}
```

---

## 🔍 结构化分析

### 核心功能
{{function_analysis}}

### 依赖关系  
{{dependency_analysis}}

### 数据流向
{{data_flow_analysis}}

---

## 💡 代码洞察

### 设计模式
{{design_patterns}}

### 复杂度评估
{{complexity_assessment}}

### 改进建议
{{improvement_suggestions}}

---

*文档由 mg_kiro MCP Server 自动生成*
```

## 🔍 语言特定分析

### JavaScript/TypeScript
- 识别ES6+特性使用
- 分析异步处理模式(Promise/async-await)
- React组件分析(如适用)
- Node.js模块模式识别

### Python
- 类和继承结构分析
- 装饰器使用识别
- 模块导入模式
- 异常处理机制

### Java
- 包结构和访问修饰符
- 接口实现和继承关系
- 注解使用分析
- 设计模式识别

## 📊 文档质量标准

### 内容完整性
- ✅ 文件基本信息准确
- ✅ 代码结构分析详细
- ✅ 功能说明清晰
- ✅ 依赖关系明确

### 格式规范性
- ✅ Markdown语法正确
- ✅ 代码块语法高亮
- ✅ 结构层次清晰
- ✅ 链接和引用有效

### 实用性评估
- ✅ 帮助理解文件用途
- ✅ 便于后续维护
- ✅ 支持快速定位问题
- ✅ 适合团队协作

## 🚀 处理优化

### 批量处理策略
- 按文件类型分组处理
- 相关文件连续处理
- 优先处理核心文件
- 控制每批次token使用量

### 错误处理机制
- 文件读取失败时的备选方案
- 大文件的截断处理策略
- 特殊字符编码问题处理
- 网络中断时的重试机制

---
*模板版本*: v4.0  
*适用模式*: Init  
*步骤*: Step3 - 文件文档生成  
*生成时间*: {{timestamp}}