# Initæ¨¡å¼ä¸“ç”¨æ¶æ„åˆ†ææ–‡æ¡£

## ğŸ¯ Initæ¨¡å¼æ¦‚è¿°

**Initæ¨¡å¼**æ˜¯mg_kiro MCP Serverçš„æ ¸å¿ƒå·¥ä½œæ¨¡å¼ï¼Œä¸“é—¨ç”¨äº**é¡¹ç›®åˆå§‹åŒ–å’Œå®Œæ•´æ–‡æ¡£ä½“ç³»ç”Ÿæˆ**ã€‚é€šè¿‡8æ­¥æ¸è¿›å¼å·¥ä½œæµï¼Œè‡ªåŠ¨åˆ†æé¡¹ç›®ç»“æ„ã€è¯†åˆ«æŠ€æœ¯æ ˆã€ç”Ÿæˆä¸“ä¸šæ–‡æ¡£ã€‚

**é‡æ„çŠ¶æ€**: ğŸ”„ AIé©±åŠ¨æ¶æ„é‡æ„ä¸­ - å·²ç§»é™¤å¤§é‡å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œè½¬ä¸ºAIæ™ºèƒ½åˆ†æ

---

## ğŸ—ï¸ Initæ¨¡å¼8æ­¥å·¥ä½œæµæ¶æ„

### ğŸ“Š å®Œæ•´å·¥ä½œæµæ¦‚è§ˆ

```
ç”¨æˆ·è¯·æ±‚ â†’ Initè·¯ç”±èšåˆå™¨ â†’ 8æ­¥å·¥ä½œæµç³»ç»Ÿ â†’ AIåˆ†æå¼•æ“ â†’ æ–‡æ¡£ç”Ÿæˆè¾“å‡º

ç¬¬1æ­¥: é¡¹ç›®ç»“æ„æ‰«æ     â†’ structure.js    â†’ WorkflowService.updateStep(0)
ç¬¬2æ­¥: æ™ºèƒ½è¯­è¨€è¯†åˆ«     â†’ language.js     â†’ WorkflowService.updateStep(1) 
ç¬¬3æ­¥: æ–‡ä»¶å†…å®¹é€šè¯»     â†’ files.js        â†’ WorkflowService.updateStep(2)
ç¬¬4æ­¥: åŸºç¡€æ¶æ„æ–‡æ¡£ç”Ÿæˆ  â†’ documents.js    â†’ WorkflowService.updateStep(3)
ç¬¬5æ­¥: æ·±åº¦æ¨¡å—åˆ†æ     â†’ modules.js      â†’ WorkflowService.updateStep(4)
ç¬¬6æ­¥: è¯­è¨€ç‰¹å®šæç¤ºè¯ç”Ÿæˆ â†’ prompts.js     â†’ WorkflowService.updateStep(5)
ç¬¬7æ­¥: å•ç‹¬æ¨¡å—æ–‡æ¡£ç”Ÿæˆ  â†’ modules.js      â†’ WorkflowService.updateStep(6)
ç¬¬8æ­¥: é›†æˆå¥‘çº¦æ–‡æ¡£ç”Ÿæˆ  â†’ contracts.js    â†’ WorkflowService.updateStep(7)
```

---

## ğŸ“ Initè·¯ç”±ç³»ç»Ÿè¯¦ç»†æ¶æ„

### ğŸ¯ ä¸»è·¯ç”±èšåˆå™¨
```
server/routes/init/index.js - Initæ¨¡å—è·¯ç”±ç´¢å¼• (ä¸»èšåˆå™¨)
â”œâ”€â”€ åŠŸèƒ½: èšåˆæ‰€æœ‰Initå­è·¯ç”±ï¼Œæä¾›ç»Ÿä¸€å…¥å£
â”œâ”€â”€ è·¯ç”±æ˜ å°„:
â”‚   â”œâ”€â”€ /contracts â†’ contracts.js (ç¬¬8æ­¥)
â”‚   â”œâ”€â”€ /data â†’ data.js (æ•°æ®æä¾›æœåŠ¡)
â”‚   â”œâ”€â”€ /documents â†’ documents.js (ç¬¬4æ­¥)
â”‚   â”œâ”€â”€ /files â†’ files.js (ç¬¬3æ­¥)
â”‚   â”œâ”€â”€ /language â†’ language.js (ç¬¬2æ­¥)
â”‚   â”œâ”€â”€ /modules â†’ modules.js (ç¬¬5æ­¥+ç¬¬7æ­¥)
â”‚   â”œâ”€â”€ /prompts â†’ prompts.js (ç¬¬6æ­¥)
â”‚   â””â”€â”€ /structure â†’ structure.js (ç¬¬1æ­¥)
â”œâ”€â”€ çŠ¶æ€ç«¯ç‚¹:
â”‚   â”œâ”€â”€ GET /status - Initæ¨¡å¼çŠ¶æ€æŸ¥è¯¢
â”‚   â””â”€â”€ GET /help - Initæ¨¡å¼å¸®åŠ©ä¿¡æ¯
â””â”€â”€ ä¾èµ–æœåŠ¡: services, serverObject (WebSocketå¹¿æ’­æ”¯æŒ)
```

### ğŸ”„ ç¬¬1æ­¥: é¡¹ç›®ç»“æ„åˆ†æ
```
server/routes/init/structure.js - é¡¹ç›®ç»“æ„æ‰«æå’Œåˆ†æç«¯ç‚¹
â”œâ”€â”€ åŠŸèƒ½: æ‰«æé¡¹ç›®æ–‡ä»¶ç»“æ„ï¼Œåˆ†æç›®å½•ç»„ç»‡ï¼Œè¯†åˆ«é…ç½®æ–‡ä»¶
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /scan-structure - æ‰§è¡Œé¡¹ç›®ç»“æ„æ‰«æ
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { projectPath }
â”‚   â”‚   â”œâ”€â”€ æ‰§è¡Œ: ProjectScanner.scanProject()
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 0, 'completed')
â”‚   â”‚   â””â”€â”€ è¾“å‡º: é¡¹ç›®ç»“æ„æ•°æ® + workflowId
â”‚   â”‚
â”‚   â””â”€â”€ GET /structure-summary - è·å–é¡¹ç›®ç»“æ„æ‘˜è¦
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚       â”œâ”€â”€ æ•°æ®æº: workflow.results.step_1
â”‚       â””â”€â”€ è¾“å‡º: ç»“æ„åŒ–æ‘˜è¦æŠ¥å‘Š
â”œâ”€â”€ æ•°æ®å¤„ç†:
â”‚   â”œâ”€â”€ _generateStructureSummary() - ç”Ÿæˆç»“æ„æ‘˜è¦
â”‚   â””â”€â”€ _extractFrameworks() - æå–æ¡†æ¶ä¿¡æ¯
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, projectScanner
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤0å®Œæˆæ ‡è®°
```

### ğŸ§  ç¬¬2æ­¥: æ™ºèƒ½è¯­è¨€è¯†åˆ« (AIé©±åŠ¨)
```
server/routes/init/language.js - è¯­è¨€æ£€æµ‹å’ŒæŠ€æœ¯æ ˆåˆ†æç«¯ç‚¹
â”œâ”€â”€ åŠŸèƒ½: æ™ºèƒ½æ£€æµ‹é¡¹ç›®ç¼–ç¨‹è¯­è¨€ï¼Œè¯†åˆ«æŠ€æœ¯æ ˆå’Œæ¡†æ¶
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: AIé©±åŠ¨é‡æ„ - 45-50%ä»¤ç‰Œæ¶ˆè€—ä¼˜åŒ–
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /detect-language - å¯åŠ¨è¯­è¨€æ£€æµ‹å¼•æ“
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId, projectPath }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: workflow.currentStep >= 1 (éœ€è¦å®Œæˆç¬¬1æ­¥)
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: aiAnalysisPackage (åŒ…å«é¡¹ç›®ç»“æ„æ•°æ®)
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿: language-detection-analysis.md
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 1, 'completed')
â”‚   â”‚   â””â”€â”€ è¾“å‡º: è¯­è¨€æ£€æµ‹ç»“æœ + æŠ€æœ¯æ ˆåˆ†æ + AIå…ƒæ•°æ®
â”‚   â”‚
â”‚   â””â”€â”€ GET /language-report - è·å–è¯­è¨€æ£€æµ‹æŠ¥å‘Š
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚       â”œâ”€â”€ æ•°æ®æº: workflow.results.step_2
â”‚       â””â”€â”€ è¾“å‡º: è¯¦ç»†è¯­è¨€åˆ†ææŠ¥å‘Š
â”œâ”€â”€ AIå¤„ç†é€»è¾‘:
â”‚   â”œâ”€â”€ aiAnalysisPackage: ç»“æ„åŒ–æ•°æ®æä¾›ç»™AI
â”‚   â”œâ”€â”€ AIæ¨¡æ¿: language-detection-analysis.md
â”‚   â”œâ”€â”€ æ¨¡æ‹Ÿç»“æœ: mockDetectionResult (å®é™…ç”±AIç”Ÿæˆ)
â”‚   â””â”€â”€ ä»¤ç‰Œä¼˜åŒ–: é¢„è®¡å‡å°‘45-50%æ¶ˆè€—
â”œâ”€â”€ æ•°æ®å¤„ç†:
â”‚   â””â”€â”€ _generateLanguageReport() - ç”Ÿæˆè¯­è¨€è¯¦ç»†æŠ¥å‘Š
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, languageService
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤1å®Œæˆæ ‡è®°
```

### ğŸ“„ ç¬¬3æ­¥: æ–‡ä»¶å†…å®¹é€šè¯» (AIé©±åŠ¨)
```
server/routes/init/files.js - æ–‡ä»¶å†…å®¹åˆ†æå’Œæ¦‚è§ˆç«¯ç‚¹
â”œâ”€â”€ åŠŸèƒ½: æ·±åº¦åˆ†æé¡¹ç›®æ ¸å¿ƒæ–‡ä»¶å†…å®¹ï¼Œç”Ÿæˆä»£ç è´¨é‡æŠ¥å‘Š
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: AIé©±åŠ¨é‡æ„ - ç§»é™¤å¤æ‚åˆ†æå‡½æ•°ï¼Œè½¬ä¸ºAIæ™ºèƒ½åˆ†æ
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /scan - é€šç”¨æ–‡ä»¶æ‰«æç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { path, options }
â”‚   â”‚   â”œâ”€â”€ æ‰§è¡Œ: projectScanner.scanProject()
â”‚   â”‚   â””â”€â”€ è¾“å‡º: æ–‡ä»¶æ‰«æç»“æœ
â”‚   â”‚
â”‚   â”œâ”€â”€ POST /scan-files - æ™ºèƒ½æ–‡ä»¶å†…å®¹åˆ†æ
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: workflow.currentStep >= 2 (éœ€è¦å®Œæˆå‰2æ­¥)
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æ•´åˆ: step1Results + step2Results
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: aiAnalysisPackage (é¡¹ç›®æ•°æ®+è¯­è¨€ä¿¡æ¯)
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿: file-content-analysis.md + file-overview-generation.md
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 2, 'completed')
â”‚   â”‚   â””â”€â”€ è¾“å‡º: æ–‡ä»¶åˆ†æç»“æœ + ä»£ç è´¨é‡æŠ¥å‘Š + AIå…ƒæ•°æ®
â”‚   â”‚
â”‚   â””â”€â”€ GET /files-overview - è·å–æ–‡ä»¶å†…å®¹æ¦‚è§ˆ
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚       â”œâ”€â”€ æ•°æ®æº: workflow.results.step_3
â”‚       â””â”€â”€ è¾“å‡º: AIç”Ÿæˆçš„æ–‡ä»¶æ¦‚è§ˆæŠ¥å‘Š
â”œâ”€â”€ AIå¤„ç†é€»è¾‘:
â”‚   â”œâ”€â”€ æ•°æ®åŒ…: é¡¹ç›®æ•°æ® + è¯­è¨€ä¿¡æ¯ + æ–‡ä»¶åˆ—è¡¨
â”‚   â”œâ”€â”€ AIæ¨¡æ¿: file-content-analysis.md (åˆ†æ) + file-overview-generation.md (æ¦‚è§ˆ)
â”‚   â”œâ”€â”€ æ™ºèƒ½åˆ†æ: ä»£ç è´¨é‡ã€æŠ€æœ¯å€ºåŠ¡ã€é‡è¦æ€§è¯„ä¼°ã€ä¾èµ–å…³ç³»
â”‚   â””â”€â”€ ä»¤ç‰Œä¼˜åŒ–: é¢„è®¡å‡å°‘45-50%æ¶ˆè€—
â”œâ”€â”€ ğŸ—‘ï¸ ç§»é™¤çš„å¤æ‚å‡½æ•° (è½¬AIé©±åŠ¨):
â”‚   â”œâ”€â”€ _generateFilesOverview() - å¤æ‚çš„æ–‡ä»¶æ¦‚è§ˆç”Ÿæˆ
â”‚   â”œâ”€â”€ _getTopImportantFiles() - é‡è¦æ–‡ä»¶æ’åºåˆ†æ
â”‚   â”œâ”€â”€ _getTopDependencies() - ä¾èµ–å…³ç³»ç»Ÿè®¡
â”‚   â”œâ”€â”€ _analyzeFileTypes() - æ–‡ä»¶ç±»å‹åˆ†æ
â”‚   â”œâ”€â”€ _generateTechInsights() - æŠ€æœ¯æ ˆæ´å¯Ÿç”Ÿæˆ
â”‚   â””â”€â”€ _checkReadinessForStep4() - Step 4å‡†å¤‡æ£€æŸ¥
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, projectScanner
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤2å®Œæˆæ ‡è®°
```

### ğŸ“– ç¬¬4æ­¥: åŸºç¡€æ¶æ„æ–‡æ¡£ç”Ÿæˆ (AIé©±åŠ¨)
```
server/routes/init/documents.js - ç³»ç»Ÿæ¶æ„å’Œæ¨¡å—ç›®å½•æ–‡æ¡£ç”Ÿæˆç«¯ç‚¹
â”œâ”€â”€ åŠŸèƒ½: åŸºäºå‰3æ­¥åˆ†æç»“æœï¼Œç”Ÿæˆsystem-architecture.mdå’Œmodules-catalog.md
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: AIé©±åŠ¨é‡æ„ - çº¯æ•°æ®æä¾›æ¨¡å¼ï¼ŒAIæ‰§è¡Œæ–‡æ¡£ç”Ÿæˆ
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /generate-architecture - ç”Ÿæˆsystem-architecture.md
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: éœ€è¦å®Œæˆå‰3æ­¥ (structure + language + files)
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æ•´åˆ: structureResult + languageResult + filesResult
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿è·å–: 
â”‚   â”‚   â”‚   â”œâ”€â”€ analysisTemplate: system-architecture-analysis.md
â”‚   â”‚   â”‚   â””â”€â”€ documentTemplate: system-architecture-generation.md
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: rawAnalysisData + åˆ†ææ¨¡æ¿ + æ–‡æ¡£æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 3, 'completed')
â”‚   â”‚   â””â”€â”€ è¾“å‡º: AIé©±åŠ¨çš„æ¶æ„æ–‡æ¡£ç”Ÿæˆæ•°æ®åŒ…
â”‚   â”‚
â”‚   â””â”€â”€ POST /generate-catalog - ç”Ÿæˆmodules-catalog.md
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚       â”œâ”€â”€ å‰ç½®æ£€æŸ¥: éœ€è¦å®Œæˆå‰3æ­¥åˆ†æ
â”‚       â”œâ”€â”€ æ•°æ®æ•´åˆ: æ¨¡å—æ•°æ® + ä¾èµ–å…³ç³» + è´¨é‡æŒ‡æ ‡
â”‚       â”œâ”€â”€ AIæ¨¡æ¿è·å–:
â”‚       â”‚   â”œâ”€â”€ moduleAnalysisTemplate: modules-catalog-analysis.md
â”‚       â”‚   â””â”€â”€ catalogTemplate: modules-catalog-generation.md
â”‚       â”œâ”€â”€ AIæ•°æ®åŒ…: rawModuleData + åˆ†ææ¨¡æ¿ + æ–‡æ¡£æ¨¡æ¿
â”‚       â””â”€â”€ è¾“å‡º: AIé©±åŠ¨çš„æ¨¡å—ç›®å½•æ–‡æ¡£ç”Ÿæˆæ•°æ®åŒ…
â”œâ”€â”€ AIå¤„ç†é€»è¾‘:
â”‚   â”œâ”€â”€ æ•°æ®æµ: åŸå§‹æ•°æ® â†’ AIåˆ†ææ¨¡æ¿ â†’ AIæ–‡æ¡£æ¨¡æ¿ â†’ ç”Ÿæˆç»“æœ
â”‚   â”œâ”€â”€ æ¨¡æ¿æœåŠ¡: unifiedTemplateService.getTemplateByContext()
â”‚   â”œâ”€â”€ æ™ºèƒ½åˆ†æ: ç³»ç»Ÿæ¦‚è¿°ã€æ ¸å¿ƒç»„ä»¶ã€æ•°æ®æµã€æ¨¡å—åˆ†ç±»
â”‚   â””â”€â”€ ä»¤ç‰Œä¼˜åŒ–: AIæ‰§è¡Œæ‰€æœ‰å¤æ‚åˆ†æé€»è¾‘
â”œâ”€â”€ ğŸ—‘ï¸ ç§»é™¤çš„å¤æ‚å‡½æ•° (è½¬AIé©±åŠ¨):
â”‚   â”œâ”€â”€ _generateSystemOverview() - ç³»ç»Ÿæ¦‚è¿°ç”Ÿæˆ
â”‚   â”œâ”€â”€ _generateCoreComponents() - æ ¸å¿ƒç»„ä»¶åˆ†æ
â”‚   â”œâ”€â”€ _generateDataFlow() - æ•°æ®æµåˆ†æ
â”‚   â”œâ”€â”€ _generateModulesByCategory() - æ¨¡å—åˆ†ç±»é€»è¾‘
â”‚   â””â”€â”€ _generateModulesByImportance() - æ¨¡å—é‡è¦æ€§è¯„ä¼°
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, promptService, unifiedTemplateService
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤3å®Œæˆæ ‡è®°
```

### ğŸ”§ ç¬¬5æ­¥: æ·±åº¦æ¨¡å—åˆ†æ (AIé©±åŠ¨)
```
server/routes/init/modules.js - æ¨¡å—è¯¦ç»†åˆ†æå’Œä¾èµ–å…³ç³»ç«¯ç‚¹
â”œâ”€â”€ åŠŸèƒ½: é€ä¸ªæ¨¡å—æ·±åº¦åˆ†æ + ç¬¬7æ­¥æ¨¡å—æ–‡æ¡£ç”Ÿæˆ
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: AIé©±åŠ¨é‡æ„ - ä»1100+è¡Œé™ä½åˆ°<500è¡Œï¼Œç§»é™¤æ‰€æœ‰å¤æ‚åˆ†æé€»è¾‘
â”œâ”€â”€ ç¬¬5æ­¥ç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /analyze-modules - é€ä¸ªæ¨¡å—è¯¦ç»†åˆ†æ
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: éœ€è¦å®Œæˆå‰4æ­¥ (step_1åˆ°step_4)
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æº: filesResult + languageResult
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: aiAnalysisPackage (æ–‡ä»¶æ•°æ®+è¯­è¨€ä¿¡æ¯)
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿: module-analysis.md
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 4, 'completed')
â”‚   â”‚   â””â”€â”€ è¾“å‡º: æ¨¡å—åˆ†æç»“æœ + ä¾èµ–å…³ç³»å›¾ + åˆ†ç±»ç»Ÿè®¡
â”‚   â”‚
â”‚   â””â”€â”€ GET /modules-detail/:moduleId - è·å–å•ä¸ªæ¨¡å—è¯¦æƒ…
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId, moduleId }
â”‚       â”œâ”€â”€ æ•°æ®æº: workflow.results.step_5
â”‚       â””â”€â”€ è¾“å‡º: å•ä¸ªæ¨¡å—çš„è¯¦ç»†åˆ†æç»“æœ
â”œâ”€â”€ ç¬¬7æ­¥ç«¯ç‚¹ (æ¨¡å—æ–‡æ¡£ç”Ÿæˆ):
â”‚   â”œâ”€â”€ POST /generate-module-docs - ç”Ÿæˆå•ç‹¬æ¨¡å—æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: éœ€è¦ç¬¬5æ­¥æ¨¡å—åˆ†æç»“æœ
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: aiDocumentationPackage (æ¨¡å—åˆ†ææ•°æ®)
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿: module-documentation-generation.md
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 6, 'completed') âš ï¸ç´¢å¼•æ··ä¹±
â”‚   â”‚   â””â”€â”€ è¾“å‡º: æ¯ä¸ªæ¨¡å—çš„å®Œæ•´æ–‡æ¡£
â”‚   â”‚
â”‚   â””â”€â”€ GET /module-docs/:moduleName - è·å–å•ä¸ªæ¨¡å—æ–‡æ¡£
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId, moduleName }
â”‚       â”œâ”€â”€ æ•°æ®æº: workflow.results.step_7
â”‚       â””â”€â”€ è¾“å‡º: æŒ‡å®šæ¨¡å—çš„æ–‡æ¡£è¯¦æƒ…
â”œâ”€â”€ âš ï¸ æ¶æ„é—®é¢˜å‘ç°:
â”‚   â”œâ”€â”€ æ­¥éª¤ç´¢å¼•æ··ä¹±: ç¬¬5æ­¥ç”¨ç´¢å¼•4ï¼Œç¬¬7æ­¥ç”¨ç´¢å¼•6
â”‚   â”œâ”€â”€ æ­¥éª¤ç¼–å·ä¸ä¸€è‡´: step_5 vs step_7 åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­
â”‚   â””â”€â”€ å·¥ä½œæµçŠ¶æ€æ··ä¹±: updateStepå‚æ•°ä¸å®é™…æ­¥éª¤ä¸åŒ¹é…
â”œâ”€â”€ AIå¤„ç†é€»è¾‘:
â”‚   â”œâ”€â”€ ç¬¬5æ­¥: module-analysis.md â†’ æ¨¡å—è¯†åˆ«ã€åˆ†ç±»ã€å¤æ‚åº¦ã€ä¾èµ–åˆ†æ
â”‚   â”œâ”€â”€ ç¬¬7æ­¥: module-documentation-generation.md â†’ å®Œæ•´æ¨¡å—æ–‡æ¡£ç”Ÿæˆ
â”‚   â””â”€â”€ ä»¤ç‰Œä¼˜åŒ–: é¢„è®¡å‡å°‘45-50%æ¶ˆè€—
â”œâ”€â”€ ğŸ—‘ï¸ ç§»é™¤çš„è¶…å¤§å‹å¤æ‚å‡½æ•° (è½¬AIé©±åŠ¨):
â”‚   â”œâ”€â”€ ç¬¬5æ­¥ç§»é™¤: _performDeepModuleAnalysis(), _analyzeModule(), _analyzeDependencies()ç­‰30+å‡½æ•°
â”‚   â””â”€â”€ ç¬¬7æ­¥ç§»é™¤: _generateModuleDocuments(), _generateSingleModuleDoc()ç­‰30+å‡½æ•°
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, promptService
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤4å®Œæˆ + æ­¥éª¤6å®Œæˆ (ç¬¬7æ­¥)
```

### ğŸ’¬ ç¬¬6æ­¥: è¯­è¨€ç‰¹å®šæç¤ºè¯ç”Ÿæˆ (AIé©±åŠ¨)
```
server/routes/init/prompts.js - è¯­è¨€ç‰¹å®šæç¤ºè¯ç”Ÿæˆè·¯ç”±æ¨¡å—
â”œâ”€â”€ åŠŸèƒ½: åŸºäºæ£€æµ‹è¯­è¨€ç”Ÿæˆä¸“ä¸šå¼€å‘ã€ä»£ç å®¡æŸ¥ã€æœ€ä½³å®è·µæç¤ºè¯
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: AIé©±åŠ¨æ¶æ„ - ç§»é™¤å¤æ‚æç¤ºè¯ç”Ÿæˆä¸šåŠ¡é€»è¾‘ï¼Œ45-50%ä»¤ç‰Œä¼˜åŒ–
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /generate-prompts - åŸºäºæ£€æµ‹è¯­è¨€ç”Ÿæˆä¸“ä¸šæç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId, options }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: workflow.currentStep >= 2 (éœ€è¦è¯­è¨€æ£€æµ‹)
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æº: step2Results (è¯­è¨€æ£€æµ‹ç»“æœ)
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: aiPromptsPackage (é¡¹ç›®ä¿¡æ¯+è¯­è¨€æ•°æ®)
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿: language-prompts-generation.md
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 5, 'completed')
â”‚   â”‚   â””â”€â”€ è¾“å‡º: development/codeReview/bestPracticesæç¤ºè¯é›†åˆ
â”‚   â”‚
â”‚   â””â”€â”€ GET /prompts/:language - è·å–è¯­è¨€ç‰¹å®šæç¤ºè¯(é™æ€)
â”‚       â”œâ”€â”€ è¾“å…¥: { language, promptType, format }
â”‚       â”œâ”€â”€ æ”¯æŒè¯­è¨€: javascript/python/java/go/rust/csharp
â”‚       â”œâ”€â”€ æç¤ºè¯ç±»å‹: all/development/codeReview/bestPractices
â”‚       â”œâ”€â”€ è¾“å‡ºæ ¼å¼: json/markdown
â”‚       â””â”€â”€ è¾“å‡º: é™æ€è¯­è¨€æç¤ºè¯é›†åˆ
â”œâ”€â”€ AIå¤„ç†é€»è¾‘:
â”‚   â”œâ”€â”€ åŠ¨æ€ç”Ÿæˆ: åŸºäºé¡¹ç›®ç‰¹ç‚¹ç”Ÿæˆå®šåˆ¶æç¤ºè¯
â”‚   â”œâ”€â”€ é™æ€ç”Ÿæˆ: åŸºäºè¯­è¨€ç‰¹æ€§ç”Ÿæˆé€šç”¨æç¤ºè¯
â”‚   â”œâ”€â”€ AIæ¨¡æ¿: language-prompts-generation.md
â”‚   â””â”€â”€ ä»¤ç‰Œä¼˜åŒ–: é¢„è®¡45-50%æ¶ˆè€—å‡å°‘
â”œâ”€â”€ ğŸ—‘ï¸ ç§»é™¤çš„å¤æ‚ä¸šåŠ¡é€»è¾‘ (è½¬AIé©±åŠ¨):
â”‚   â”œâ”€â”€ LanguagePromptGenerator - è¯­è¨€ç‰¹å®šæç¤ºè¯ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ generateDevelopmentPrompt - å¼€å‘åŠ©æ‰‹æç¤ºè¯ç”Ÿæˆ
â”‚   â”œâ”€â”€ generateCodeReviewPrompt - ä»£ç å®¡æŸ¥æç¤ºè¯ç”Ÿæˆ
â”‚   â”œâ”€â”€ generateBestPracticesPrompt - æœ€ä½³å®è·µæç¤ºè¯ç”Ÿæˆ
â”‚   â”œâ”€â”€ generateFrameworkPrompts - æ¡†æ¶ç‰¹å®šæç¤ºè¯ç”Ÿæˆ
â”‚   â””â”€â”€ customizePromptForProject - é¡¹ç›®å®šåˆ¶æç¤ºè¯
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤5å®Œæˆæ ‡è®°
```

### ğŸ“‹ ç¬¬8æ­¥: é›†æˆå¥‘çº¦æ–‡æ¡£ç”Ÿæˆ (AIé©±åŠ¨)
```
server/routes/init/contracts.js - é›†æˆå¥‘çº¦æ–‡æ¡£ç”Ÿæˆè·¯ç”±æ¨¡å—
â”œâ”€â”€ åŠŸèƒ½: æ¨¡å—é—´è°ƒç”¨å…³ç³»ã€æ•°æ®æµå‘ã€APIå¥‘çº¦åˆ†æ
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: AIé©±åŠ¨é‡æ„ - çº¯æ•°æ®æä¾›+AIåˆ†ææ¨¡å¼
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /generate-contracts - ç”Ÿæˆé›†æˆå¥‘çº¦æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚   â”‚   â”œâ”€â”€ å‰ç½®æ£€æŸ¥: éœ€è¦å®Œæˆstep_1, step_2, step_3, step_5
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æ•´åˆ: æ‰€æœ‰å‰ç½®æ­¥éª¤ç»“æœ
â”‚   â”‚   â”œâ”€â”€ AIæ•°æ®åŒ…: aiAnalysisPackage (å®Œæ•´å·¥ä½œæµæ•°æ®)
â”‚   â”‚   â”œâ”€â”€ AIæ¨¡æ¿: integration-contracts-analysis.md + integration-contracts-generation.md
â”‚   â”‚   â”œâ”€â”€ å·¥ä½œæµ: WorkflowService.updateStep(workflowId, 7, 'completed') âš ï¸ç¬¬8æ­¥ç”¨ç´¢å¼•7
â”‚   â”‚   â””â”€â”€ è¾“å‡º: é›†æˆåˆ†æç»“æœ + å¥‘çº¦æ–‡æ¡£ + é£é™©è¯„ä¼°
â”‚   â”‚
â”‚   â”œâ”€â”€ GET /contracts - è·å–é›†æˆå¥‘çº¦æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId, format }
â”‚   â”‚   â”œâ”€â”€ è¾“å‡ºæ ¼å¼: json/markdown/summary
â”‚   â”‚   â””â”€â”€ è¾“å‡º: ä¸åŒæ ¼å¼çš„å¥‘çº¦æ–‡æ¡£
â”‚   â”‚
â”‚   â””â”€â”€ GET /relations - è·å–é›†æˆå…³ç³»å›¾æ•°æ®
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId, type }
â”‚       â”œâ”€â”€ å…³ç³»ç±»å‹: modules/integration/dataflow/dependencies
â”‚       â””â”€â”€ è¾“å‡º: ä¸åŒç±»å‹çš„å…³ç³»å›¾æ•°æ®
â”œâ”€â”€ AIå¤„ç†é€»è¾‘:
â”‚   â”œâ”€â”€ æ•°æ®æ•´åˆ: 8æ­¥å·¥ä½œæµçš„å®Œæ•´æ•°æ®
â”‚   â”œâ”€â”€ æ™ºèƒ½åˆ†æ: æ¨¡å—å…³ç³»ã€APIå¥‘çº¦ã€æ•°æ®æµã€é£é™©è¯„ä¼°
â”‚   â”œâ”€â”€ AIæ¨¡æ¿: analysis + generationåŒæ¨¡æ¿
â”‚   â””â”€â”€ ä»¤ç‰Œä¼˜åŒ–: å‡å°‘45-50%æ¶ˆè€—
â”œâ”€â”€ ğŸ—‘ï¸ ç§»é™¤çš„å¤æ‚å‡½æ•° (è½¬AIé©±åŠ¨):
â”‚   â”œâ”€â”€ _generateContractMarkdown() - å¤æ‚çš„å¥‘çº¦æ–‡æ¡£ç”Ÿæˆ
â”‚   â”œâ”€â”€ _generateProjectOverview() - é¡¹ç›®æ¦‚è§ˆç”Ÿæˆ
â”‚   â”œâ”€â”€ _generateArchitectureSummary() - æ¶æ„æ‘˜è¦ç”Ÿæˆ
â”‚   â””â”€â”€ _generateBuiltinContractDocument() - å†…ç½®æ–‡æ¡£ç”Ÿæˆå™¨
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, promptService
â””â”€â”€ çŠ¶æ€ç®¡ç†: æ­¥éª¤7å®Œæˆæ ‡è®° (å®é™…ç¬¬8æ­¥)
```

### ğŸ—„ï¸ æ•°æ®æä¾›æœåŠ¡ (é‡æ„æ¶æ„)
```
server/routes/init/data.js - æ•°æ®æä¾›è·¯ç”±æ¨¡å—
â”œâ”€â”€ åŠŸèƒ½: MCPæä¾›åŸå§‹æ‰«ææ•°æ®å’Œæ¨¡æ¿ï¼ŒAIä¸»å¯¼åˆ†æ
â”œâ”€â”€ ğŸ”„ æ¶æ„ç‰¹ç‚¹: é‡æ„ä¸ºçº¯æ•°æ®æä¾›æ¨¡å¼ï¼Œä¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ æ ¸å¿ƒç«¯ç‚¹:
â”‚   â”œâ”€â”€ POST /get-project-scan-data - è·å–é¡¹ç›®æ‰«æåŸå§‹æ•°æ®å’Œåˆ†ææ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { projectPath }
â”‚   â”‚   â”œâ”€â”€ åŠŸèƒ½: åˆ›å»ºå·¥ä½œæµ + åŸºç¡€æ‰«æ + æ¨¡æ¿åŠ è½½
â”‚   â”‚   â”œâ”€â”€ è¾“å‡º: rawScanData + analysisTemplates + referenceData
â”‚   â”‚   â””â”€â”€ ç›®æ ‡: ä¸ºAIæä¾›å®Œæ•´çš„åˆ†ææ•°æ®åŒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ POST /get-language-detection-data - è·å–è¯­è¨€æ£€æµ‹æ•°æ®å’Œæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId }
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æº: é¡¹ç›®æ‰«æç»“æœ
â”‚   â”‚   â”œâ”€â”€ è¾“å‡º: rawData + languageTemplates + languageReferences
â”‚   â”‚   â””â”€â”€ ç›®æ ‡: ä¸ºAIè¯­è¨€æ£€æµ‹æä¾›æ•°æ®åŒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ POST /get-module-analysis-data - è·å–æ¨¡å—åˆ†ææ•°æ®å’Œæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ è¾“å…¥: { workflowId, language }
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æº: æ–‡ä»¶åˆ†æ + è¯­è¨€æ£€æµ‹ç»“æœ
â”‚   â”‚   â”œâ”€â”€ è¾“å‡º: rawData + moduleTemplates + moduleReferences
â”‚   â”‚   â””â”€â”€ ç›®æ ‡: ä¸ºAIæ¨¡å—åˆ†ææä¾›æ•°æ®åŒ…
â”‚   â”‚
â”‚   â””â”€â”€ POST /save-init-analysis-result - ä¿å­˜AIåˆ†æç»“æœ
â”‚       â”œâ”€â”€ è¾“å…¥: { workflowId, analysisType, analysisResult, stepNumber }
â”‚       â”œâ”€â”€ åŠŸèƒ½: å°†AIåˆ†æç»“æœä¿å­˜åˆ°å·¥ä½œæµä¸­
â”‚       â””â”€â”€ è¾“å‡º: ä¿å­˜ç¡®è®¤ä¿¡æ¯
â”œâ”€â”€ è¾…åŠ©åŠŸèƒ½:
â”‚   â”œâ”€â”€ _performBasicScan() - æ‰§è¡ŒåŸºç¡€é¡¹ç›®æ‰«æ
â”‚   â”œâ”€â”€ _loadInitAnalysisTemplates() - åŠ è½½Initåˆ†ææ¨¡æ¿
â”‚   â”œâ”€â”€ _loadLanguageDetectionTemplates() - åŠ è½½è¯­è¨€æ£€æµ‹æ¨¡æ¿
â”‚   â”œâ”€â”€ _loadModuleAnalysisTemplates() - åŠ è½½æ¨¡å—åˆ†ææ¨¡æ¿
â”‚   â”œâ”€â”€ _loadInitReferenceData() - è·å–å‚è€ƒæ•°æ®
â”‚   â””â”€â”€ å„ç§é»˜è®¤æ¨¡æ¿å’Œå‚è€ƒæ•°æ®å‡½æ•°
â”œâ”€â”€ ä¾èµ–æœåŠ¡: workflowService, projectScanner, unifiedTemplateService
â””â”€â”€ æ¶æ„æ„ä¹‰: å°†MCPä»åˆ†ææ‰§è¡Œè€…è½¬æ¢ä¸ºæ•°æ®æä¾›è€…
```

---

## ğŸ”§ æœåŠ¡å±‚ä¾èµ–æ¶æ„

### æ ¸å¿ƒæœåŠ¡ä¾èµ–å›¾
```
Initæ¨¡å¼è·¯ç”±ç³»ç»Ÿ
â”œâ”€â”€ WorkflowService - 8æ­¥å·¥ä½œæµç®¡ç† (æ ¸å¿ƒä¾èµ–)
â”‚   â”œâ”€â”€ createWorkflow() - åˆ›å»ºå·¥ä½œæµä¼šè¯
â”‚   â”œâ”€â”€ updateStep() - æ›´æ–°æ­¥éª¤çŠ¶æ€ âš ï¸æ­¥éª¤ç´¢å¼•æ··ä¹±é—®é¢˜
â”‚   â”œâ”€â”€ getWorkflow() - è·å–å·¥ä½œæµå¯¹è±¡
â”‚   â”œâ”€â”€ getProgress() - è·å–å·¥ä½œæµè¿›åº¦
â”‚   â””â”€â”€ validateWorkflowStep() - éªŒè¯å·¥ä½œæµæ­¥éª¤
â”‚
â”œâ”€â”€ UnifiedTemplateService - ç»Ÿä¸€æ¨¡æ¿æœåŠ¡ (AIé©±åŠ¨æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ getTemplateByContext() - åŸºäºä¸Šä¸‹æ–‡è·å–æ¨¡æ¿
â”‚   â”œâ”€â”€ æ™ºèƒ½æ¨¡æ¿é€‰æ‹©: 4ç§ç­–ç•¥ (legacy/intelligent/hybrid/advanced-ai)
â”‚   â””â”€â”€ ä¸Šä¸‹æ–‡ç½®ä¿¡åº¦è¯„åˆ†å’Œç­–ç•¥ä¼˜é€‰ç®—æ³•
â”‚
â”œâ”€â”€ ProjectScanner - é¡¹ç›®ç»“æ„æ‰«æå™¨
â”‚   â”œâ”€â”€ scanProject() - é¡¹ç›®æ‰«æä¸»å‡½æ•°
â”‚   â””â”€â”€ getMaxDepth() - è·å–æœ€å¤§æ‰«ææ·±åº¦
â”‚
â”œâ”€â”€ LanguageDetector - è¯­è¨€è¯†åˆ«å¼•æ“
â”‚   â”œâ”€â”€ detectLanguage() - è¯­è¨€æ£€æµ‹ä¸»å‡½æ•°
â”‚   â””â”€â”€ 6ç§è¯­è¨€æ”¯æŒ + 30+æ¡†æ¶æ£€æµ‹
â”‚
â”œâ”€â”€ PromptService - æç¤ºè¯æœåŠ¡ (éƒ¨åˆ†è·¯ç”±ä½¿ç”¨)
â”‚   â””â”€â”€ loadPrompt() - åŠ è½½æç¤ºè¯
â”‚
â””â”€â”€ ResponseService - æ ‡å‡†åŒ–å“åº”æ ¼å¼
    â”œâ”€â”€ success() - æˆåŠŸå“åº”
    â”œâ”€â”€ error() - é”™è¯¯å“åº”
    â””â”€â”€ workflowSuccess() - å·¥ä½œæµæˆåŠŸå“åº”
```

---

## âš ï¸ å‘ç°çš„æ¶æ„é—®é¢˜

### ğŸ”´ ä¸¥é‡é—®é¢˜

1. **æ­¥éª¤ç´¢å¼•æ··ä¹±**:
   ```
   å®é™…æ­¥éª¤ vs å·¥ä½œæµç´¢å¼• vs å­˜å‚¨é”®å:
   ç¬¬1æ­¥ â†’ updateStep(0) â†’ step_1  âœ… ä¸€è‡´
   ç¬¬2æ­¥ â†’ updateStep(1) â†’ step_2  âœ… ä¸€è‡´  
   ç¬¬3æ­¥ â†’ updateStep(2) â†’ step_3  âœ… ä¸€è‡´
   ç¬¬4æ­¥ â†’ updateStep(3) â†’ step_4  âœ… ä¸€è‡´
   ç¬¬5æ­¥ â†’ updateStep(4) â†’ step_5  âœ… ä¸€è‡´
   ç¬¬6æ­¥ â†’ updateStep(5) â†’ step_6  âœ… ä¸€è‡´
   ç¬¬7æ­¥ â†’ updateStep(6) â†’ step_7  âŒ æ··ä¹± (åœ¨modules.jsä¸­)
   ç¬¬8æ­¥ â†’ updateStep(7) â†’ step_8  âŒ æ··ä¹± (åœ¨contracts.jsä¸­)
   ```

2. **è·¯ç”±èŒè´£é‡å **:
   ```
   modules.js åŒæ—¶å¤„ç†:
   â”œâ”€â”€ ç¬¬5æ­¥: POST /analyze-modules (æ­¥éª¤4)
   â””â”€â”€ ç¬¬7æ­¥: POST /generate-module-docs (æ­¥éª¤6)
   
   é—®é¢˜: ä¸€ä¸ªæ–‡ä»¶å¤„ç†ä¸¤ä¸ªä¸è¿ç»­çš„å·¥ä½œæµæ­¥éª¤
   ```

3. **AIé©±åŠ¨é‡æ„ä¸å½»åº•**:
   ```
   éƒ¨åˆ†æ–‡ä»¶å·²é‡æ„ä¸ºAIé©±åŠ¨:
   â”œâ”€â”€ âœ… language.js - å®Œå…¨AIé©±åŠ¨
   â”œâ”€â”€ âœ… files.js - å®Œå…¨AIé©±åŠ¨
   â”œâ”€â”€ âœ… prompts.js - å®Œå…¨AIé©±åŠ¨
   â”œâ”€â”€ âš ï¸ documents.js - éƒ¨åˆ†AIé©±åŠ¨
   â”œâ”€â”€ âš ï¸ modules.js - éƒ¨åˆ†AIé©±åŠ¨
   â””â”€â”€ âš ï¸ contracts.js - éƒ¨åˆ†AIé©±åŠ¨
   ```

### ğŸŸ¡ ä¸­ç­‰é—®é¢˜

4. **é…ç½®ä¸ä¸€è‡´**:
   ```
   config/modes.config.json æ˜¾ç¤ºInitæ¨¡å¼æ¨¡æ¿:
   â”œâ”€â”€ "system-architecture" âœ… å¯¹åº”documents.js
   â”œâ”€â”€ "modules-catalog" âœ… å¯¹åº”documents.js  
   â”œâ”€â”€ "user-stories" âŒ æœªåœ¨Initè·¯ç”±ä¸­ä½¿ç”¨
   â””â”€â”€ "technical-analysis" âŒ æœªåœ¨Initè·¯ç”±ä¸­ä½¿ç”¨
   ```

5. **é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€**:
   - æœ‰äº›è·¯ç”±ä½¿ç”¨ `return error(res, ...)`
   - æœ‰äº›è·¯ç”±ä½¿ç”¨ `error(res, ...)` (æ— return)
   - å·¥ä½œæµæ›´æ–°å¤±è´¥å¤„ç†ä¸ä¸€è‡´

---

## ğŸ”§ å»ºè®®çš„æ¶æ„é‡æ„æ–¹æ¡ˆ

### ğŸ“‹ é‡æ„ä¼˜å…ˆçº§

#### ğŸ”´ é«˜ä¼˜å…ˆçº§ (ç«‹å³ä¿®å¤)

1. **ç»Ÿä¸€æ­¥éª¤ç´¢å¼•**:
   ```javascript
   // æ ‡å‡†åŒ–æ‰€æœ‰æ­¥éª¤ç´¢å¼•
   const STEP_INDEX_MAP = {
     'scan_structure': 0,      // ç¬¬1æ­¥
     'detect_language': 1,     // ç¬¬2æ­¥  
     'scan_files': 2,          // ç¬¬3æ­¥
     'generate_architecture': 3, // ç¬¬4æ­¥
     'analyze_modules': 4,     // ç¬¬5æ­¥
     'generate_prompts': 5,    // ç¬¬6æ­¥
     'generate_module_docs': 6, // ç¬¬7æ­¥
     'generate_contracts': 7   // ç¬¬8æ­¥
   };
   ```

2. **æ‹†åˆ†modules.js**:
   ```
   å½“å‰: modules.js (ç¬¬5æ­¥ + ç¬¬7æ­¥)
   æ‹†åˆ†ä¸º:
   â”œâ”€â”€ modules-analysis.js (ç¬¬5æ­¥: æ·±åº¦æ¨¡å—åˆ†æ)
   â””â”€â”€ modules-docs.js (ç¬¬7æ­¥: æ¨¡å—æ–‡æ¡£ç”Ÿæˆ)
   ```

3. **ç»Ÿä¸€AIé©±åŠ¨æ¶æ„**:
   ```javascript
   // æ ‡å‡†åŒ–AIæ•°æ®åŒ…æ ¼å¼
   const aiAnalysisPackage = {
     rawData: {...},           // åŸå§‹æ•°æ®
     analysisTemplate: {...},  // åˆ†ææ¨¡æ¿
     documentTemplate: {...},  // æ–‡æ¡£æ¨¡æ¿ (å¯é€‰)
     processingInstructions: {...}, // å¤„ç†æŒ‡ä»¤
     metadata: {...}          // å…ƒæ•°æ®
   };
   ```

#### ğŸŸ¡ ä¸­ç­‰ä¼˜å…ˆçº§ (é€æ­¥ä¼˜åŒ–)

4. **å®Œå–„é”™è¯¯å¤„ç†**:
   ```javascript
   // ç»Ÿä¸€é”™è¯¯å¤„ç†æ ¼å¼
   try {
     // ä¸šåŠ¡é€»è¾‘
     return workflowSuccess(res, step, stepName, workflowId, data, progress);
   } catch (err) {
     console.error(`[${stepName}] å¤±è´¥:`, err);
     if (workflowId) {
       workflowService.updateStep(workflowId, stepIndex, 'failed', null, err.message);
     }
     return error(res, err.message, 500, { step, stepName });
   }
   ```

5. **ä¼˜åŒ–æ¨¡æ¿é…ç½®**:
   ```json
   // æ›´æ–°modes.config.json
   "init": {
     "templates": [
       "system-architecture",    // ç¬¬4æ­¥ä½¿ç”¨
       "modules-catalog",       // ç¬¬4æ­¥ä½¿ç”¨
       "integration-contracts", // ç¬¬8æ­¥ä½¿ç”¨
       "language-prompts"       // ç¬¬6æ­¥ä½¿ç”¨
     ]
   }
   ```

#### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (é•¿æœŸè§„åˆ’)

6. **æ¥å£æ ‡å‡†åŒ–**:
   - ç»Ÿä¸€è¾“å…¥å‚æ•°éªŒè¯
   - æ ‡å‡†åŒ–å“åº”æ ¼å¼
   - å®Œå–„OpenAPIæ–‡æ¡£

7. **æ€§èƒ½ä¼˜åŒ–**:
   - å¹¶è¡Œå¤„ç†éä¾èµ–æ­¥éª¤
   - æ™ºèƒ½ç¼“å­˜æœºåˆ¶
   - æ¸è¿›å¼ç»“æœè¿”å›

---

## ğŸ“Š Initæ¨¡å¼å®Œæ•´æ•°æ®æµå›¾

```
ç”¨æˆ·è¯·æ±‚é¡¹ç›®åˆå§‹åŒ–
         â†“
    Initè·¯ç”±èšåˆå™¨ (index.js)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                8æ­¥å·¥ä½œæµç³»ç»Ÿ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬1æ­¥: structure.js                             â”‚
â”‚ â”œâ”€â”€ POST /scan-structure                        â”‚
â”‚ â”œâ”€â”€ ProjectScanner.scanProject()                â”‚  
â”‚ â”œâ”€â”€ WorkflowService.updateStep(0, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: é¡¹ç›®ç»“æ„æ•°æ®                            â”‚
â”‚                                                 â”‚
â”‚ ç¬¬2æ­¥: language.js (AIé©±åŠ¨)                     â”‚
â”‚ â”œâ”€â”€ POST /detect-language                       â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: language-detection-analysis.md      â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(1, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: è¯­è¨€æ£€æµ‹ + æŠ€æœ¯æ ˆåˆ†æ                   â”‚
â”‚                                                 â”‚
â”‚ ç¬¬3æ­¥: files.js (AIé©±åŠ¨)                        â”‚
â”‚ â”œâ”€â”€ POST /scan-files                            â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: file-content-analysis.md            â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(2, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: æ–‡ä»¶åˆ†æ + ä»£ç è´¨é‡æŠ¥å‘Š                 â”‚
â”‚                                                 â”‚
â”‚ ç¬¬4æ­¥: documents.js (AIé©±åŠ¨)                     â”‚
â”‚ â”œâ”€â”€ POST /generate-architecture                 â”‚
â”‚ â”œâ”€â”€ POST /generate-catalog                      â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: system-architecture-analysis.md     â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(3, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: system-architecture.md + modules-catalog.md â”‚
â”‚                                                 â”‚
â”‚ ç¬¬5æ­¥: modules.js (AIé©±åŠ¨)                      â”‚
â”‚ â”œâ”€â”€ POST /analyze-modules                       â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: module-analysis.md                  â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(4, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: æ·±åº¦æ¨¡å—åˆ†æ + ä¾èµ–å…³ç³»                â”‚
â”‚                                                 â”‚
â”‚ ç¬¬6æ­¥: prompts.js (AIé©±åŠ¨)                      â”‚
â”‚ â”œâ”€â”€ POST /generate-prompts                      â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: language-prompts-generation.md      â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(5, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: è¯­è¨€ç‰¹å®šæç¤ºè¯é›†åˆ                     â”‚
â”‚                                                 â”‚
â”‚ ç¬¬7æ­¥: modules.js (AIé©±åŠ¨) âš ï¸æ··åˆåœ¨ç¬¬5æ­¥æ–‡ä»¶ä¸­  â”‚
â”‚ â”œâ”€â”€ POST /generate-module-docs                  â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: module-documentation-generation.md  â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(6, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: æ¯ä¸ªæ¨¡å—çš„å®Œæ•´æ–‡æ¡£                     â”‚
â”‚                                                 â”‚
â”‚ ç¬¬8æ­¥: contracts.js (AIé©±åŠ¨)                    â”‚
â”‚ â”œâ”€â”€ POST /generate-contracts                    â”‚
â”‚ â”œâ”€â”€ AIæ¨¡æ¿: integration-contracts-analysis.md   â”‚
â”‚ â”œâ”€â”€ WorkflowService.updateStep(7, 'completed')  â”‚
â”‚ â””â”€â”€ è¾“å‡º: é›†æˆå¥‘çº¦æ–‡æ¡£ + å…³ç³»å›¾                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    å®Œæ•´é¡¹ç›®æ–‡æ¡£ä½“ç³»
```

---

## ğŸ’¡ æ€»ç»“

**Initæ¨¡å¼**æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä½†æ¶æ„å¤æ‚çš„å·¥ä½œæµç³»ç»Ÿã€‚é€šè¿‡8æ­¥æ¸è¿›å¼å¤„ç†ï¼Œèƒ½å¤Ÿå°†ä»»æ„é¡¹ç›®è½¬æ¢ä¸ºå®Œæ•´çš„æ–‡æ¡£åŒ–é¡¹ç›®ã€‚

### âœ… ä¼˜åŠ¿
- **AIé©±åŠ¨é‡æ„**: å¤§å¹…ç®€åŒ–ä»£ç å¤æ‚åº¦ï¼Œæå‡åˆ†æè´¨é‡
- **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªæ­¥éª¤ç‹¬ç«‹å¯æµ‹è¯•
- **å·¥ä½œæµç®¡ç†**: å®Œæ•´çš„çŠ¶æ€è·Ÿè¸ªå’Œé”™è¯¯å¤„ç†
- **æ¨¡æ¿ç³»ç»Ÿ**: çµæ´»çš„æ–‡æ¡£ç”Ÿæˆå’Œæ ¼å¼åŒ–

### âš ï¸ éœ€è¦æ”¹è¿›
- **æ­¥éª¤ç´¢å¼•æ··ä¹±**: éœ€è¦ç»Ÿä¸€æ ‡å‡†åŒ–
- **æ–‡ä»¶èŒè´£é‡å **: modules.jséœ€è¦æ‹†åˆ†
- **AIé‡æ„ä¸å½»åº•**: éœ€è¦å®Œå…¨è½¬ä¸ºAIé©±åŠ¨æ¨¡å¼
- **é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€**: éœ€è¦æ ‡å‡†åŒ–å¤„ç†æµç¨‹

**å»ºè®®**: å…ˆè§£å†³é«˜ä¼˜å…ˆçº§é—®é¢˜ï¼Œç„¶åé€æ­¥å®Œå–„æ•´ä¸ªInitæ¨¡å¼æ¶æ„ï¼Œä½¿å…¶æˆä¸ºçœŸæ­£çš„AIé©±åŠ¨æ™ºèƒ½é¡¹ç›®åˆå§‹åŒ–ç³»ç»Ÿã€‚

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´: 2025-09-08*  
*åˆ†æå·¥å…·: mg_kiro MCP Server æ·±åº¦æ¶æ„åˆ†æ*